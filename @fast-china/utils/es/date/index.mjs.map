{"version":3,"file":"index.mjs","sources":["../../../../src/date/index.ts"],"sourcesContent":["import { isNil } from \"lodash-unified\";\n\n/**\n * Date工具类\n */\nexport const dateUtil = {\n\t/**\n\t * 根据当前时间生成问候语\n\t */\n\tgetGreet(): string {\n\t\tconst now = new Date();\n\t\tconst hour = now.getHours();\n\t\tlet greet = \"\";\n\n\t\tif (hour < 5) {\n\t\t\tgreet = \"夜深了，注意身体哦！\";\n\t\t} else if (hour < 9) {\n\t\t\tgreet = \"早上好！\" + \"欢迎回来！\";\n\t\t} else if (hour < 12) {\n\t\t\tgreet = \"上午好！\" + \"欢迎回来！\";\n\t\t} else if (hour < 14) {\n\t\t\tgreet = \"中午好！\" + \"欢迎回来！\";\n\t\t} else if (hour < 18) {\n\t\t\tgreet = \"下午好！\" + \"欢迎回来！\";\n\t\t} else if (hour < 24) {\n\t\t\tgreet = \"晚上好！\" + \"欢迎回来！\";\n\t\t} else {\n\t\t\tgreet = \"您好！\" + \"欢迎回来！\";\n\t\t}\n\t\treturn greet;\n\t},\n\t/**\n\t * 时间处理翻译\n\t */\n\tdateTimeFix(date: number | string | Date | null | undefined): string {\n\t\tif (isNil(date)) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\t// 获取时间戳\n\t\tlet timestamp: number;\n\t\tif (typeof date === \"string\") {\n\t\t\ttimestamp = new Date(date).getTime();\n\t\t} else if (typeof date === \"number\") {\n\t\t\ttimestamp = date;\n\t\t} else {\n\t\t\ttimestamp = date.getTime();\n\t\t}\n\n\t\t// 秒级时间戳处理\n\t\tif (timestamp < 1e12) {\n\t\t\ttimestamp *= 1000;\n\t\t}\n\n\t\tconst minute = 1000 * 60;\n\t\tconst hour = minute * 60;\n\t\tconst day = hour * 24;\n\t\tconst month = day * 30;\n\t\t// 获取当前时间\n\t\tconst curTime = new Date().getTime();\n\t\t// 比较\n\t\tconst diffValue = curTime - timestamp;\n\n\t\t// 计算差异时间的量级\n\t\tconst monthC = diffValue / month;\n\t\tconst weekC = diffValue / (7 * day);\n\t\tconst dayC = diffValue / day;\n\t\tconst hourC = diffValue / hour;\n\t\tconst minC = diffValue / minute;\n\n\t\t// 如果本地时间反而小于变量时间\n\t\tif (diffValue < 0) {\n\t\t\tconst monthC1 = Math.abs(monthC);\n\t\t\tconst weekC1 = Math.abs(weekC);\n\t\t\tconst dayC1 = Math.abs(dayC);\n\t\t\tconst hourC1 = Math.abs(hourC);\n\t\t\tconst minC1 = Math.abs(minC);\n\n\t\t\tif (monthC1 > 12) {\n\t\t\t\t// 超过1年，直接显示 几 年前\n\t\t\t\treturn `${Math.floor(monthC1 / 12)}年后`;\n\t\t\t} else if (monthC1 >= 6) {\n\t\t\t\treturn \"半年后\";\n\t\t\t} else if (monthC1 >= 1) {\n\t\t\t\treturn `${Math.floor(monthC1)}月后`;\n\t\t\t} else if (weekC1 > 2) {\n\t\t\t\treturn \"半月后\";\n\t\t\t} else if (weekC1 >= 1) {\n\t\t\t\treturn `${Math.floor(weekC1)}周后`;\n\t\t\t} else if (dayC1 >= 1) {\n\t\t\t\treturn `${Math.floor(dayC1)}天后`;\n\t\t\t} else if (hourC1 >= 1) {\n\t\t\t\treturn `${Math.floor(hourC1)}小时后`;\n\t\t\t} else if (minC1 >= 1) {\n\t\t\t\treturn `${Math.floor(minC1)}分钟后`;\n\t\t\t}\n\t\t\treturn \"刚刚\";\n\t\t\t// return \"不久前\";\n\t\t}\n\n\t\t// 使用\n\t\tif (monthC > 12) {\n\t\t\t// 超过1年，直接显示 几 年前\n\t\t\treturn `${Math.floor(monthC / 12)}年前`;\n\t\t} else if (monthC >= 6) {\n\t\t\treturn \"半年前\";\n\t\t} else if (monthC >= 1) {\n\t\t\treturn `${Math.floor(monthC)}月前`;\n\t\t} else if (weekC > 2) {\n\t\t\treturn \"半月前\";\n\t\t} else if (weekC >= 1) {\n\t\t\treturn `${Math.floor(weekC)}周前`;\n\t\t} else if (dayC >= 1) {\n\t\t\treturn `${Math.floor(dayC)}天前`;\n\t\t} else if (hourC >= 1) {\n\t\t\treturn `${Math.floor(hourC)}小时前`;\n\t\t} else if (minC >= 1) {\n\t\t\treturn `${Math.floor(minC)}分钟前`;\n\t\t}\n\t\treturn \"刚刚\";\n\t},\n\t/**\n\t * 获取默认时间\n\t * @returns [00:00:00, 23:59:59]\n\t */\n\tgetDefaultTime(): Date[] {\n\t\tconst end = new Date();\n\t\tconst start = new Date();\n\t\tstart.setMonth(start.getMonth() - 1);\n\t\tstart.setHours(0, 0, 0);\n\t\tend.setHours(23, 59, 59);\n\t\treturn [start, end];\n\t},\n\t/**\n\t * 获取简单的日期时间\n\t * @returns xxxx-xx-xx 00:00:00\n\t */\n\tgetSimpleTime(): Date {\n\t\tconst start = new Date();\n\t\tstart.setHours(0, 0, 0);\n\t\treturn start;\n\t},\n\t/**\n\t * 获取简单的日期时间范围\n\t */\n\tgetSimpleShortcuts(): {\n\t\ttext: string;\n\t\tvalue: () => Date;\n\t}[] {\n\t\treturn [\n\t\t\t{\n\t\t\t\ttext: \"今天\",\n\t\t\t\tvalue: (): Date => {\n\t\t\t\t\tconst date = new Date();\n\t\t\t\t\tdate.setHours(0, 0, 0);\n\t\t\t\t\treturn date;\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"昨天\",\n\t\t\t\tvalue: (): Date => {\n\t\t\t\t\tconst date = new Date();\n\t\t\t\t\tdate.setDate(date.getDate() - 1);\n\t\t\t\t\tdate.setHours(0, 0, 0);\n\t\t\t\t\treturn date;\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"一周前\",\n\t\t\t\tvalue: (): Date => {\n\t\t\t\t\tconst date = new Date();\n\t\t\t\t\tdate.setDate(date.getDate() - 7);\n\t\t\t\t\tdate.setHours(0, 0, 0);\n\t\t\t\t\treturn date;\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"一月前\",\n\t\t\t\tvalue: (): Date => {\n\t\t\t\t\tconst date = new Date();\n\t\t\t\t\tdate.setMonth(date.getMonth() - 1);\n\t\t\t\t\tdate.setHours(0, 0, 0);\n\t\t\t\t\treturn date;\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"一年前\",\n\t\t\t\tvalue: (): Date => {\n\t\t\t\t\tconst date = new Date();\n\t\t\t\t\tdate.setFullYear(date.getFullYear() - 1);\n\t\t\t\t\tdate.setHours(0, 0, 0);\n\t\t\t\t\treturn date;\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t},\n\t/**\n\t * 获取日期范围\n\t */\n\tgetShortcuts(): {\n\t\ttext: string;\n\t\tvalue: () => Date[];\n\t}[] {\n\t\treturn [\n\t\t\t{\n\t\t\t\ttext: \"近1天\",\n\t\t\t\tvalue: (): Date[] => {\n\t\t\t\t\tconst end = new Date();\n\t\t\t\t\tconst start = new Date();\n\t\t\t\t\tstart.setDate(start.getDate() - 1);\n\t\t\t\t\tstart.setHours(0, 0, 0);\n\t\t\t\t\tend.setHours(23, 59, 59);\n\t\t\t\t\treturn [start, end];\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"近3天\",\n\t\t\t\tvalue: (): Date[] => {\n\t\t\t\t\tconst end = new Date();\n\t\t\t\t\tconst start = new Date();\n\t\t\t\t\tstart.setDate(start.getDate() - 3);\n\t\t\t\t\tstart.setHours(0, 0, 0);\n\t\t\t\t\tend.setHours(23, 59, 59);\n\t\t\t\t\treturn [start, end];\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"近1周\",\n\t\t\t\tvalue: (): Date[] => {\n\t\t\t\t\tconst end = new Date();\n\t\t\t\t\tconst start = new Date();\n\t\t\t\t\tstart.setDate(start.getDate() - 7);\n\t\t\t\t\tstart.setHours(0, 0, 0);\n\t\t\t\t\tend.setHours(23, 59, 59);\n\t\t\t\t\treturn [start, end];\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"近1月\",\n\t\t\t\tvalue: (): Date[] => {\n\t\t\t\t\tconst end = new Date();\n\t\t\t\t\tconst start = new Date();\n\t\t\t\t\tstart.setMonth(start.getMonth() - 1);\n\t\t\t\t\tstart.setHours(0, 0, 0);\n\t\t\t\t\tend.setHours(23, 59, 59);\n\t\t\t\t\treturn [start, end];\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"近3月\",\n\t\t\t\tvalue: (): Date[] => {\n\t\t\t\t\tconst end = new Date();\n\t\t\t\t\tconst start = new Date();\n\t\t\t\t\tstart.setMonth(start.getMonth() - 3);\n\t\t\t\t\tstart.setHours(0, 0, 0);\n\t\t\t\t\tend.setHours(23, 59, 59);\n\t\t\t\t\treturn [start, end];\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"近6月\",\n\t\t\t\tvalue: (): Date[] => {\n\t\t\t\t\tconst end = new Date();\n\t\t\t\t\tconst start = new Date();\n\t\t\t\t\tstart.setMonth(start.getMonth() - 6);\n\t\t\t\t\tstart.setHours(0, 0, 0);\n\t\t\t\t\tend.setHours(23, 59, 59);\n\t\t\t\t\treturn [start, end];\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"近1年\",\n\t\t\t\tvalue: (): Date[] => {\n\t\t\t\t\tconst end = new Date();\n\t\t\t\t\tconst start = new Date();\n\t\t\t\t\tstart.setFullYear(start.getFullYear() - 1);\n\t\t\t\t\tstart.setHours(0, 0, 0);\n\t\t\t\t\tend.setHours(23, 59, 59);\n\t\t\t\t\treturn [start, end];\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t},\n\t/**\n\t * 判断传入的时间是否大于当前时间\n\t */\n\tgetDisabledDate(time: Date): boolean {\n\t\treturn time.getTime() > Date.now();\n\t},\n};\n"],"names":["dateUtil","getGreet","hour","Date","getHours","greet","dateTimeFix","date","isNil","timestamp","getTime","minute","day","month","diffValue","monthC","weekC","dayC","hourC","minC","monthC1","Math","abs","weekC1","dayC1","hourC1","minC1","floor","getDefaultTime","end","start","setMonth","getMonth","setHours","getSimpleTime","getSimpleShortcuts","text","value","setDate","getDate","setFullYear","getFullYear","getShortcuts","getDisabledDate","time","now"],"mappings":"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"}